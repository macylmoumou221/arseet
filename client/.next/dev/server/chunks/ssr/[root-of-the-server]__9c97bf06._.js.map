{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/OneDrive/Bureau/WORK/arseet/client/components/details-produit.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DetailsProduit = registerClientReference(\n    function() { throw new Error(\"Attempted to call DetailsProduit() from the server but DetailsProduit is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/OneDrive/Bureau/WORK/arseet/client/components/details-produit.tsx <module evaluation>\",\n    \"DetailsProduit\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,iBAAiB,IAAA,0TAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,mGACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/OneDrive/Bureau/WORK/arseet/client/components/details-produit.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DetailsProduit = registerClientReference(\n    function() { throw new Error(\"Attempted to call DetailsProduit() from the server but DetailsProduit is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/OneDrive/Bureau/WORK/arseet/client/components/details-produit.tsx\",\n    \"DetailsProduit\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,iBAAiB,IAAA,0TAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,+EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/OneDrive/Bureau/WORK/arseet/client/app/produit/%5Bid%5D/page.tsx"],"sourcesContent":["import { notFound } from \"next/navigation\"\nimport { DetailsProduit } from \"@/components/details-produit\"\nimport type { ProduitAPI, Produit, Couleur } from \"@/lib/types\"\n\ninterface PageProps {\n  params: Promise<{\n    id: string\n  }>\n}\n\n// Function to convert API product to frontend product format\nfunction convertAPIProduct(apiProduct: ProduitAPI): Produit {\n  console.log('Converting API Product:', apiProduct)\n  console.log('API Tailles:', apiProduct.tailles)\n  \n  // Parse additional images from JSON string if needed\n  let additionalImages: string[] = []\n  if (apiProduct.images) {\n    try {\n      additionalImages = typeof apiProduct.images === 'string' \n        ? JSON.parse(apiProduct.images) \n        : apiProduct.images\n    } catch (e) {\n      additionalImages = Array.isArray(apiProduct.images) ? apiProduct.images : []\n    }\n  }\n\n  const mappedTailles = apiProduct.tailles?.map(t => typeof t === 'string' ? t : t.taille) || []\n  console.log('Mapped Tailles:', mappedTailles)\n\n  return {\n    id: apiProduct.id.toString(),\n    nom: apiProduct.nom,\n    // Ensure prix is a number (backend may send string or number)\n    prix: typeof apiProduct.prix === 'string' ? parseFloat(apiProduct.prix) : apiProduct.prix,\n    description: apiProduct.description,\n    categorie: apiProduct.categorie,\n    nouveau: apiProduct.est_nouveau,\n    stock: apiProduct.stock,\n    enRupture: apiProduct.en_rupture,\n    // Promotion percent and computed promotional price\n    promotionPercent: apiProduct.promotion ? Number(apiProduct.promotion) : 0,\n    enPromotion: (apiProduct.promotion ? Number(apiProduct.promotion) : 0) > 0 || apiProduct.en_promotion,\n    prixPromotion: apiProduct.promotion ? ( (typeof apiProduct.prix === 'string' ? parseFloat(apiProduct.prix) : apiProduct.prix) * (1 - Number(apiProduct.promotion) / 100) ) : undefined,\n    tailles: mappedTailles,\n    additionalImages: additionalImages.slice(0, 10), // Limit to 10 images\n    couleurs: apiProduct.couleurs?.map((c): Couleur => ({\n      nom: c.couleur,\n      code: c.code_hexa,\n      imageFront: apiProduct.image_avant || \"/placeholder.svg\",\n      imageBack: apiProduct.image_arriere || \"/placeholder.svg\",\n    })) || [],\n  }\n}\n\nasync function getProduct(id: string): Promise<Produit | null> {\n  try {\n    const { API_BASE_URL } = await import(\"@/lib/api\")\n    const response = await fetch(`${API_BASE_URL}/api/produits/${id}`, {\n      cache: \"no-store\", // Always fetch fresh data\n    })\n\n    if (!response.ok) {\n      return null\n    }\n\n    const data = await response.json()\n    \n    if (data.success && data.data) {\n      return convertAPIProduct(data.data)\n    }\n    \n    return null\n  } catch (error) {\n    console.error(\"Error fetching product:\", error)\n    return null\n  }\n}\n\nexport default async function ProduitPage({ params }: PageProps) {\n  const { id } = await params\n  const produit = await getProduct(id)\n\n  if (!produit) {\n    notFound()\n  }\n\n  return (\n    <main className=\"container mx-auto px-4 py-12\">\n      <DetailsProduit produit={produit} />\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AASA,6DAA6D;AAC7D,SAAS,kBAAkB,UAAsB;IAC/C,QAAQ,GAAG,CAAC,2BAA2B;IACvC,QAAQ,GAAG,CAAC,gBAAgB,WAAW,OAAO;IAE9C,qDAAqD;IACrD,IAAI,mBAA6B,EAAE;IACnC,IAAI,WAAW,MAAM,EAAE;QACrB,IAAI;YACF,mBAAmB,OAAO,WAAW,MAAM,KAAK,WAC5C,KAAK,KAAK,CAAC,WAAW,MAAM,IAC5B,WAAW,MAAM;QACvB,EAAE,OAAO,GAAG;YACV,mBAAmB,MAAM,OAAO,CAAC,WAAW,MAAM,IAAI,WAAW,MAAM,GAAG,EAAE;QAC9E;IACF;IAEA,MAAM,gBAAgB,WAAW,OAAO,EAAE,IAAI,CAAA,IAAK,OAAO,MAAM,WAAW,IAAI,EAAE,MAAM,KAAK,EAAE;IAC9F,QAAQ,GAAG,CAAC,mBAAmB;IAE/B,OAAO;QACL,IAAI,WAAW,EAAE,CAAC,QAAQ;QAC1B,KAAK,WAAW,GAAG;QACnB,8DAA8D;QAC9D,MAAM,OAAO,WAAW,IAAI,KAAK,WAAW,WAAW,WAAW,IAAI,IAAI,WAAW,IAAI;QACzF,aAAa,WAAW,WAAW;QACnC,WAAW,WAAW,SAAS;QAC/B,SAAS,WAAW,WAAW;QAC/B,OAAO,WAAW,KAAK;QACvB,WAAW,WAAW,UAAU;QAChC,mDAAmD;QACnD,kBAAkB,WAAW,SAAS,GAAG,OAAO,WAAW,SAAS,IAAI;QACxE,aAAa,CAAC,WAAW,SAAS,GAAG,OAAO,WAAW,SAAS,IAAI,CAAC,IAAI,KAAK,WAAW,YAAY;QACrG,eAAe,WAAW,SAAS,GAAK,CAAC,OAAO,WAAW,IAAI,KAAK,WAAW,WAAW,WAAW,IAAI,IAAI,WAAW,IAAI,IAAI,CAAC,IAAI,OAAO,WAAW,SAAS,IAAI,GAAG,IAAM;QAC7K,SAAS;QACT,kBAAkB,iBAAiB,KAAK,CAAC,GAAG;QAC5C,UAAU,WAAW,QAAQ,EAAE,IAAI,CAAC,IAAe,CAAC;gBAClD,KAAK,EAAE,OAAO;gBACd,MAAM,EAAE,SAAS;gBACjB,YAAY,WAAW,WAAW,IAAI;gBACtC,WAAW,WAAW,aAAa,IAAI;YACzC,CAAC,MAAM,EAAE;IACX;AACF;AAEA,eAAe,WAAW,EAAU;IAClC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG;QACzB,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,cAAc,EAAE,IAAI,EAAE;YACjE,OAAO;QACT;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO;QACT;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,KAAK,OAAO,IAAI,KAAK,IAAI,EAAE;YAC7B,OAAO,kBAAkB,KAAK,IAAI;QACpC;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO;IACT;AACF;AAEe,eAAe,YAAY,EAAE,MAAM,EAAa;IAC7D,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,MAAM,UAAU,MAAM,WAAW;IAEjC,IAAI,CAAC,SAAS;QACZ,IAAA,mPAAQ;IACV;IAEA,qBACE,gSAAC;QAAK,WAAU;kBACd,cAAA,gSAAC,qMAAc;YAAC,SAAS;;;;;;;;;;;AAG/B","debugId":null}}]
}