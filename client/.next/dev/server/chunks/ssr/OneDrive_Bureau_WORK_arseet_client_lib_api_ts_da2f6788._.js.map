{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/OneDrive/Bureau/WORK/arseet/client/lib/api.ts"],"sourcesContent":["// API Configuration\r\nexport const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000\"\r\n\r\n// API Client utility\r\nexport const apiClient = {\r\n  /**\r\n   * Make a GET request to the API\r\n   */\r\n  get: async <T>(endpoint: string): Promise<T> => {\r\n    const url = `${API_BASE_URL}${endpoint}`\r\n    console.log(\"üîç API GET Request:\", url)\r\n    \r\n    const response = await fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n\r\n    console.log(\"üì• API Response Status:\", response.status, response.statusText)\r\n\r\n    if (!response.ok) {\r\n      let errorMessage = `API Error: ${response.statusText}`\r\n      try {\r\n        const errorData = await response.json()\r\n        console.error(\"‚ùå API Error Response:\", errorData)\r\n        errorMessage = errorData.message || errorData.error || errorMessage\r\n      } catch (e) {\r\n        // If JSON parsing fails, use status text\r\n      }\r\n      throw new Error(errorMessage)\r\n    }\r\n\r\n    return response.json()\r\n  },\r\n\r\n  /**\r\n   * Make a POST request to the API\r\n   */\r\n  post: async <T>(endpoint: string, data?: any): Promise<T> => {\r\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    })\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`API Error: ${response.statusText}`)\r\n    }\r\n\r\n    return response.json()\r\n  },\r\n\r\n  /**\r\n   * Make a PUT request to the API\r\n   */\r\n  put: async <T>(endpoint: string, data?: any): Promise<T> => {\r\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    })\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`API Error: ${response.statusText}`)\r\n    }\r\n\r\n    return response.json()\r\n  },\r\n\r\n  /**\r\n   * Make a DELETE request to the API\r\n   */\r\n  delete: async <T>(endpoint: string): Promise<T> => {\r\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`API Error: ${response.statusText}`)\r\n    }\r\n\r\n    return response.json()\r\n  },\r\n\r\n  /**\r\n   * Make a request with authentication token\r\n   */\r\n  authenticatedRequest: async <T>(\r\n    endpoint: string,\r\n    method: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\" = \"GET\",\r\n    data?: any\r\n  ): Promise<T> => {\r\n    // Get token from localStorage (you can modify this based on your auth implementation)\r\n    const token = typeof window !== \"undefined\" ? localStorage.getItem(\"authToken\") : null\r\n\r\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n      method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n      },\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    })\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`API Error: ${response.statusText}`)\r\n    }\r\n\r\n    return response.json()\r\n  },\r\n}\r\n\r\n// Specific API endpoints\r\nexport const api = {\r\n  // Auth endpoints\r\n  auth: {\r\n    login: (email: string, password: string) =>\r\n      apiClient.post(\"/api/auth/login\", { email, password }),\r\n    register: (data: { nom: string; email: string; telephone: string; password: string }) =>\r\n      apiClient.post(\"/api/auth/register\", data),\r\n    logout: () => apiClient.post(\"/api/auth/logout\"),\r\n  },\r\n\r\n  // Products endpoints\r\n  products: {\r\n    getAll: () => apiClient.get(\"/api/produits\"),\r\n    getById: (id: string) => apiClient.get(`/api/produits/${id}`),\r\n    getNew: () => apiClient.get(\"/api/produits?est_nouveau=true\"),\r\n    create: (data: any) => apiClient.post(\"/api/produits\", data),\r\n    update: (id: string, data: any) => apiClient.put(`/api/produits/${id}`, data),\r\n    delete: (id: string) => apiClient.delete(`/api/produits/${id}`),\r\n  },\r\n\r\n  // Orders endpoints\r\n  orders: {\r\n    create: (data: any) => apiClient.post(\"/api/orders\", data),\r\n    getAll: () => apiClient.authenticatedRequest(\"/api/orders\"),\r\n    getById: (id: string) => apiClient.authenticatedRequest(`/api/orders/${id}`),\r\n  },\r\n\r\n  // User endpoints\r\n  user: {\r\n    getProfile: () => apiClient.authenticatedRequest(\"/api/user/profile\"),\r\n    updateProfile: (data: any) => apiClient.authenticatedRequest(\"/api/user/profile\", \"PUT\", data),\r\n  },\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}